######### PINTOS Macro #########

# Root directory which has /src as its child 
#export PINTOS_DIR='/home/sp/PintosUserProgram/pintos'
export PINTOS_DIR='/home/plos/Team03'

# USED emulator. 'bochs'(Project1) or 'qmenu'(Project2,3,4)
export TEST_EMUL='bochs'

# Current project. One of 'threads' 'userprog' 'vm' 'filesys'
#export PINTOS_PRJ='userprog'
export PINTOS_PRJ='filesys'

# Test directory. One of 'threads' 'userprog' 'vm' 'filesys/extended'
#export TEST_DIR='userprog'
export TEST_DIR='filesys'

# Test item
export TEST_ITEM='extended/dir-rm-cwd'

# Additional test file like 'child-simple' 'tar' ...
export ADD_TEST_FILE='child-simple'


# Usage
#   --- used commonly
#   gop : got to the current project build directory
#   editrc : to modify this file
#   applyrc : to apply this file
#
#   runitem : run a test item
#   checkitem : check a test item and get result (pass or FAIL)
#
#   debugitem : start pintos with gdb mode and run a test item
#   debugpintos : start gdb at the build directory.
#
#   --- used at Project2,3,4
#   makedisk : make new disks (filesys.dsk, swap.dsk)
#   copyitem : FORMAT the disk and copy a user test program to filesys.dsk
#   copyadd : copy additional test program to filesys.dsk
#   copysample : copy sample.txt file to filesys.dsk
#
#   --- used at Project4
#   debugcopy : start pintos for tracing formatting and copying operation
#   debugtar : start pintos for tracing tar opeation
#
# Well, you don't need to touch below without special reason.
export PATH=$PINTOS_DIR/src/utils/:$PATH
alias gop='cd $PINTOS_DIR/src/$PINTOS_PRJ;cd build'
alias editrc='vi $PINTOS_DIR/.pintosrc'
alias applyrc='source $PINTOS_DIR/.pintosrc'
alias runitem='../../utils/pintos --$TEST_EMUL -- -q run $TEST_ITEM'
alias checkitem='make tests/$TEST_DIR/$TEST_ITEM.result'
alias debugitem='../../utils/pintos --$TEST_EMUL --gdb -- run $TEST_ITEM'
alias debugpintos='../../utils/pintos-gdb kernel.o'
alias makedisk='pintos-mkdisk filesys.dsk --filesys-size=2' #;pintos-mkdisk swap.dsk --swap-size=4'
alias formatdisk='pintos -f -q'
alias mk='make clean ; make ; gop'
alias copyitem='pintos -p tests/$TEST_DIR/$TEST_ITEM -a $TEST_ITEM -- -f -q'
alias copyadd='pintos -p tests/$TEST_DIR/$ADD_TEST_FILE -a $ADD_TEST_FILE -- -q'
alias copysample='pintos -p ../../tests/$TEST_DIR/sample.txt -a sample.txt -- -q'
alias debugcopy='pintos -p tests/$TEST_DIR/$TEST_ITEM -a $TEST_ITEM --gdb --$TEST_EMUL -- -f -q'
alias debugtar='pintos --$TEST_EMUL --gdb -- -q run "tar fs.tar /"'
alias testitem='pintos -v -k -T 5 --bochs --filesys-size=2 -p tests/userprog/$TEST_ITEM -a TEST_ITEM -- -q -f run TEST_ITEM'
alias testitem2='pintos -T 5 --bochs --filesys-size=2 -p tests/userprog/$TEST_ITEM -a $TEST_ITEM -- -q -f run $TEST_ITEM'
alias auto="cd $PINTOS_DIR/src/$PINTOS_PRJ; make clean; make; gop; makedisk; formatdisk; pintos -p ../../examples/echo -a echo -- -q ; pintos -q run 'echo x'"
alias vsc='vi $PINTOS_DIR/src/userprog/syscall.c'
alias vfc='vi $PINTOS_DIR/src/filesys/filesys.c'
alias vdc='vi $PINTOS_DIR/src/filesys/directory.c'
alias vic='vi $PINTOS_DIR/src/filesys/inode.c'
